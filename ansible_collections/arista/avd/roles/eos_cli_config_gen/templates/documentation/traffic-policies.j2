{% if traffic_policies is arista.avd.defined %}
### Traffic Policies information
{%     if traffic_policies.field_sets is arista.avd.defined %}
**IPv4 Field sets**

{%         if traffic_policies.field_sets.ipv4 is arista.avd.defined %}
| Field Set Name | Values |
| -------------- | ------ |
{% for field_set_ipv4 in traffic_policies.field_sets.ipv4 %}| {{field_set_ipv4}} | {%for prefix in traffic_policies.field_sets.ipv4[field_set_ipv4] %}{{prefix}}<br/>{% endfor %} | {%endfor%}
{%         else %}
No IPv4 field-set configured.
{%         endif %}

**IPv6 Field sets**

{%         if traffic_policies.field_sets.ipv6 is arista.avd.defined %}
| Field Set Name | Values |
| -------------- | ------ |
{% for field_set_ipv6 in traffic_policies.field_sets.ipv6 %}| {{field_set_ipv6}} | {%for prefix in traffic_policies.field_sets.ipv6[field_set_ipv6] %}{{prefix}}<br/>{% endfor %} | {%endfor%}
{%         else %}
No IPv6 field-set configured.
{%         endif %}

**L4 Port Field sets**

{%         if traffic_policies.field_sets.ports is arista.avd.defined %}
| Field Set Name | Values |
| -------------- | ------ |
{% for field_set_port in traffic_policies.field_sets.ports %}| {{field_set_port}} | {{traffic_policies.field_sets.ports[field_set_port] }} | {%endfor%}
{%         else %}
No L4 Port field-set configured.
{%         endif %}
{%     else %}
No Field-set configured on device.
{%     endif %}
{%     if traffic_policies.policies is arista.avd.defined %}
#### Traffic Policies
{%         for policy in traffic_policies.policies | arista.avd.natural_sort %}
**{{ policy }}:**

{%             if traffic_policies.policies[policy].matchs is arista.avd.defined %}
| Match set | Type | Sources | Destinations | Protocol | Action |
| --------- | ---- | ------- | ------------ | -------- | ------ |
{%                 for match in traffic_policies.policies[policy].matchs | arista.avd.natural_sort %} | {{ match }} | {{ traffic_policies.policies[policy].matchs[match].type | lower }} | {% if traffic_policies.policies[policy].matchs[match].source.prefix_lists is arista.avd.defined %}{% for prefix_list in traffic_policies.policies[policy].matchs[match].source.prefix_lists %} {{ prefix_list }}<br/>{% endfor %} {% endif %}{% if traffic_policies.policies[policy].matchs[match].source.prefixes is arista.avd.defined %}{% for prefix in traffic_policies.policies[policy].matchs[match].source.prefixes %} {{ prefix }}<br/>{% endfor %}{% endif %} | {% if traffic_policies.policies[policy].matchs[match].destination.prefix_lists is arista.avd.defined %}{% for prefix_list in traffic_policies.policies[policy].matchs[match].destination.prefix_lists %} {{ prefix_list }}<br/>{% endfor %}{% endif %}{% if traffic_policies.policies[policy].matchs[match].destination.prefixes is arista.avd.defined %}{% for prefix in traffic_policies.policies[policy].matchs[match].destination.prefixes %} {{ prefix }}<br/>{% endfor %}{% endif %} | {% if traffic_policies.policies[policy].matchs[match].protocols is arista.avd.defined %}{% for protocol in traffic_policies.policies[policy].matchs[match].protocols %} {{ protocol }} {% if traffic_policies.policies[policy].matchs[match].protocols[protocol].src_port is arista.avd.defined %} (src: {{ traffic_policies.policies[policy].matchs[match].protocols[protocol].src_port }}){%endif%}{% if traffic_policies.policies[policy].matchs[match].protocols[protocol].dst_port is arista.avd.defined %} (dst: {{ traffic_policies.policies[policy].matchs[match].protocols[protocol].dst_port }}){%endif%}{% if traffic_policies.policies[policy].matchs[match].protocols[protocol].dst_field is arista.avd.defined %} (dst: {{ traffic_policies.policies[policy].matchs[match].protocols[protocol].dst_field }}){%endif%}{% if traffic_policies.policies[policy].matchs[match].protocols[protocol].src_field is arista.avd.defined %} (dst: {{ traffic_policies.policies[policy].matchs[match].protocols[protocol].src_field }}){%endif%}<br/>{% endfor %}{% else %} any {% endif %}|  {% if traffic_policies.policies[policy].matchs[match].actions.count is arista.avd.defined %}counter: {{ traffic_policies.policies[policy].matchs[match].actions.count }}<br/>{% endif %}{% if traffic_policies.policies[policy].matchs[match].actions.traffic_class is arista.avd.defined %}traffic-class: {{ traffic_policies.policies[policy].matchs[match].actions.traffic_class }}<br/>{% endif %}{% if traffic_policies.policies[policy].matchs[match].actions.dscp is arista.avd.defined %}dscp code: {{ traffic_policies.policies[policy].matchs[match].actions.dscp }}<br/>{% endif %}{% if traffic_policies.policies[policy].matchs[match].actions.log is arista.avd.defined(true) %}logging: enabled<br/>{% endif %} {% if traffic_policies.policies[policy].matchs[match].actions.drop is arista.avd.defined(true) %}action: drop<br/>{% else %}action: pass{% endif %} |
{%                  endfor %}
{%              else %}
No Match match condition configured.
{%             endif %}

{%         endfor %}
{%     endif %}
### Traffic Policies Device Configuration

```eos
{% include 'eos/traffic-policies.j2' %}
```
{% else %}
Traffic Policies not defined
{% endif %}
